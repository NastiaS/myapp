var app=angular.module("ngMyApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/page/home",controller:"HomeController"}).when("/about",{templateUrl:"/page/about",controller:"AboutController"}).when("/posts",{templateUrl:"/page/posts",controller:"PostsController"}).when("/users",{templateUrl:"/page/users",controller:"UsersController"}).when("/login",{templateUrl:"/page/login",controller:"LoginController"}).when("/signup",{templateUrl:"/page/signup",controller:"SignupController"}).when("/step2",{templateUrl:"/page/signup/step2",controller:"Step2Controller"}).when("/step3",{templateUrl:"/page/signup/step3",controller:"Step3Controller"}).when("/step4",{templateUrl:"/page/signup/step4",controller:"Step4Controller"}).when("/notAllowed",{templateUrl:"/page/signup/notAllowed",controller:"NotAllowedController"}).when("/success",{templateUrl:"/page/signup/success",controller:"SuccessController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("ngMyApp").controller("AboutController",["$scope","$rootScope",function(a,b){b.bodylayout="about-layout"}]),angular.module("ngMyApp").controller("HomeController",["$scope","$rootScope","Users",function(a,b,c){b.bodylayout="home-layout",c.bringAuthUser().then(function(c){a.user=c,b.currentUser=c})}]),angular.module("ngMyApp").controller("LoginController",["$scope","$rootScope",function(a,b){b.bodylayout="login-layout"}]),angular.module("ngMyApp").controller("NotAllowedController",["$scope","$rootScope",function(a,b){b.bodylayout="notAllowed-layout"}]),angular.module("ngMyApp").controller("PostsController",["$scope","$rootScope","Posts","Comments",function(a,b,c,d){b.bodylayout="posts-layout",a.show_posts=!1,a.show_comments=!1,a.loadPosts=function(){a.show_posts=!0,c.bringPosts().then(function(b){a.posts=b})},a.hidePosts=function(){a.posts=null,a.show_posts=!1},a.loadComments=function(b){d.bringComments(b).then(function(b){a.comments=b})},a.commentForPost=function(a,b){return a==b?!0:!1},a.hideComments=function(){a.comments=null}}]),angular.module("ngMyApp").controller("SignupController",["$scope","$rootScope","Users","$location",function(a,b,c,d){b.bodylayout="signup-layout",b.objectToSend={firstName:null,lastName:null,email:null,password:null,state:null,city:null,age:null},a.verify=function(){c.createUser(b.objectToSend).then(function(a){d.url("/step2")})}}]),angular.module("ngMyApp").controller("Step2Controller",["$scope","$rootScope","Users","$location",function(a,b,c,d){b.bodylayout="signup-layout",a.verify=function(){c.createUser(b.objectToSend).then(function(a){d.url("/step3")})}}]),angular.module("ngMyApp").controller("Step3Controller",["$scope","$rootScope","Users","$location","Cities","States",function(a,b,c,d,e,f){b.bodylayout="signup-layout",a.showForm=!1,f.getStates().then(function(b){a.states=b}),a.getCitiesByState=function(){c.createUser(b.objectToSend).then(function(b){e.getCities(b.state).then(function(b){a.cities=b})}),a.showForm=!0},a.verify=function(){c.createUser(b.objectToSend).then(function(a){d.url("/step4")})}}]),angular.module("ngMyApp").controller("Step4Controller",["$scope","$rootScope","Users","$location",function(a,b,c,d){b.bodylayout="signup-layout",a.submit=function(a){c.createUser(b.objectToSend).then(function(a){console.log("DATA",a),"Error"==a?d.url("/notAllowed"):d.url("/success")})}}]),angular.module("ngMyApp").controller("SuccessController",["$scope","$rootScope","$location",function(a,b,c){b.bodylayout="success-layout",a.successRedirect=function(){c.url("/login")}}]),angular.module("ngMyApp").controller("UsersController",["$scope","$rootScope","Users","Albums",function(a,b,c,d){b.bodylayout="users-layout",a.show_users=!1,a.loadUsers=function(){a.show_users=!0,c.bringUsers().then(function(b){a.users=b})},a.hideUsers=function(){a.users=null,a.show_users=!1},a.loadAlbums=function(b){d.bringAlbums(b).then(function(b){a.albums=b})},a.albumsForUser=function(a,b){return a==b?!0:!1},a.postsForUser=function(a,b){return a==b?!0:!1},a.hideAlbums=function(){a.albums=null}}]),app.directive("slothLogo",function(){return{restrict:"E",templateUrl:"javascripts/app/directives/sloth-logo/sloth-logo.html"}}),app.factory("APIConfig",[function(){return{devRoot:"http://jsonplaceholder.typicode.com/",prodRoot:"",env:"dev",setEnv:function(){},getRoot:function(){return"dev"===this.env?this.devRoot:"prod"===this.env?this.prodRoot:null}}}]),app.factory("Posts",["$http","APIConfig",function(a,b){return{bringPosts:function(){return a.get(b.getRoot()+"posts/").then(function(a){return a.data})}}}]),app.factory("Comments",["$http","APIConfig",function(a,b){return{bringComments:function(c){return a.get(b.getRoot()+"posts/"+c+"/comments").then(function(a){return a.data})}}}]),app.factory("Users",["$http","APIConfig",function(a,b){return{bringUsers:function(){return a.get(b.getRoot()+"users/").then(function(a){return a.data})},bringAuthUser:function(){return a.get("/getUser").then(function(a){return a.data})},createUser:function(b){return a.post("/verify",b).then(function(a){return a.data})}}}]),app.factory("Albums",["$http","APIConfig",function(a,b){return{bringAlbums:function(c){return a.get(b.getRoot()+"users/"+c+"/albums").then(function(a){return a.data})}}}]),app.factory("States",["$http",function(a){return{getStates:function(b){return a.get("/states/").then(function(a){return a.data})}}}]),app.factory("Cities",["$http",function(a){return{getCities:function(b){return a.get("/cities/"+b).then(function(a){return a.data})}}}]);